{"version":3,"sources":["mock/index.ts","utils/use-promise.ts","api/utils.ts","utils/constants.ts","api/api.ts","component/page/login/LoginPage.tsx","component/page/main/MainPage.tsx","App.tsx","utils/environment.ts","index.tsx","globals.module.less","component/page/login/LoginPage.module.less"],"names":["allHandlers","rest","get","req","res","ctx","delay","json","isAuthenticated","setupWorker","start","serviceWorker","url","process","catch","e","console","error","Status","axiosInstance","axios","create","withCredentials","headers","LoginPage","currentLocation","window","location","href","loginUrl","className","styles","loginPage","cls","globalStyles","blokkXl","title","MainPage","defaultState","result","undefined","status","NOT_STARTED","App","state","isAuthenticatedPromise","func","dependencies","useState","promise","setPromise","promiseState","setPromiseState","useEffect","canceled","then","RESOLVED","err","REJECTED","usePromise","PENDING","isRejected","data","path","this","isDevelopment","require","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.38e78c13.chunk.js","sourcesContent":["import { rest, setupWorker } from 'msw'\nimport { RequestHandler } from 'msw/lib/types/handlers/RequestHandler'\n\nconst allHandlers: RequestHandler[] = [\n\trest.get('/auth-proxy/is-authenticated', (req, res, ctx) => {\n\t\treturn res(ctx.delay(500), ctx.json({\n\t\t\tisAuthenticated: true\n\t\t}))\n\t})\n]\n\nsetupWorker(...allHandlers)\n\t.start({ serviceWorker: { url: process.env.PUBLIC_URL + '/mockServiceWorker.js' } })\n\t.catch((e) => {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error('Unable to setup mocked API endpoints', e)\n\t})\n","import { useEffect, useState } from 'react'\n\nexport enum Status {\n\tNOT_STARTED = 'NOT_STARTED',\n\tPENDING = 'PENDING',\n    RESOLVED = 'RESOLVED',\n    REJECTED = 'REJECTED'\n}\n\ntype PromiseState<R, E> = NotStartedPromiseState | PendingPromiseState | ResolvedPromiseState<R> | RejectedPromiseState<E>;\n\ninterface NotStartedPromiseState {\n\tresult: undefined;\n\terror: undefined;\n\tstatus: Status.NOT_STARTED;\n}\n\ninterface PendingPromiseState {\n    result: undefined;\n    error: undefined;\n    status: Status.PENDING;\n}\n\ninterface ResolvedPromiseState<R> {\n    result: R;\n    error: undefined;\n    status: Status.RESOLVED;\n}\n\ninterface RejectedPromiseState<E> {\n    result: undefined;\n    error: E;\n    status: Status.REJECTED;\n}\n\nconst defaultState: NotStartedPromiseState = {\n\tresult: undefined,\n\terror: undefined,\n\tstatus: Status.NOT_STARTED\n}\n\nexport const usePromise = <R, E = Error>(func?: () => Promise<R>, dependencies?: never[]): PromiseState<R, E> & { setPromise: (promise: Promise<R>) => void } => {\n\tconst [ promise, setPromise ] = useState<Promise<R>>()\n\tconst [ promiseState, setPromiseState ] = useState<PromiseState<R, E>>(defaultState)\n\n\tuseEffect(() => {\n\t\tif (func) {\n\t\t\tsetPromise(func())\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, dependencies || [])\n\n\tuseEffect(() => {\n\t\tif (promise) {\n\t\t\tlet canceled = false\n\n\t\t\tsetPromiseState(defaultState)\n\n\t\t\tpromise\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif (canceled) return\n\n\t\t\t\t\tsetPromiseState({ status: Status.RESOLVED, result: res, error: undefined })\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tif (canceled) return\n\n\t\t\t\t\tsetPromiseState({ status: Status.REJECTED, result: undefined, error: err })\n\t\t\t\t})\n\n\t\t\treturn () => {\n\t\t\t\tcanceled = true\n\t\t\t}\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [ promise ])\n\n\treturn {\n\t\t...promiseState,\n\t\tsetPromise\n\t}\n}\n\nexport const isNotStartedOrPending = <R, E>(state: PromiseState<R, E>): state is NotStartedPromiseState | PendingPromiseState => {\n\treturn state.status === Status.NOT_STARTED || state.status === Status.PENDING\n}\n\nexport const isResolved = <R, E>(state: PromiseState<R, E>): state is ResolvedPromiseState<R> => {\n\treturn state.status === Status.RESOLVED\n}\n\nexport const isRejected = <R, E>(state: PromiseState<R, E>): state is RejectedPromiseState<E> => {\n\treturn state.status === Status.REJECTED\n}\n","import axios from 'axios'\n\nimport { APP_NAME } from '../utils/constants'\n\nexport const axiosInstance = axios.create({\n\twithCredentials: true,\n\theaders: { 'Nav-Consumer-Id': APP_NAME },\n})\n","export const APP_NAME = 'amt-tiltaksansvarlig-flate'","import { AxiosPromise } from 'axios'\n\nimport { axiosInstance } from './utils'\n\nexport interface IsAuthenticated {\n\tisAuthenticated: boolean;\n}\n\nexport const isAuthenticated = (): AxiosPromise<IsAuthenticated> => {\n\treturn axiosInstance.get('/auth-proxy/is-authenticated')\n}","import cls from 'classnames'\nimport { AlertStripeAdvarsel } from 'nav-frontend-alertstriper'\nimport { Systemtittel } from 'nav-frontend-typografi'\nimport React from 'react'\n\nimport globalStyles from '../../../globals.module.less'\nimport styles from './LoginPage.module.less'\n\nexport const LoginPage = (): React.ReactElement => {\n\tconst currentLocation = window.location.href\n\tconst loginUrl = `/auth-proxy/oauth2/login?redirect_uri=${currentLocation}`\n\n\treturn (\n\t\t<main className={styles.loginPage}>\n\t\t\t<Systemtittel className={cls(globalStyles.blokkXl, styles.title)}>Hei!</Systemtittel>\n\n\t\t\t<AlertStripeAdvarsel className={globalStyles.blokkXl}>\n\t\t\t\tDette er en demol√∏sning\n\t\t\t</AlertStripeAdvarsel>\n\n\t\t\t<a className=\"knapp knapp--hoved\" href={loginUrl}>Logg inn</a>\n\t\t</main>\n\t)\n}","import React from 'react'\n\nexport const MainPage = (): React.ReactElement => {\n\treturn (\n\t\t<main>\n\t\t\t<h1>Du er logget inn</h1>\n\t\t</main>\n\t)\n}","import { AxiosResponse } from 'axios'\nimport React from 'react'\nimport { BrowserRouter, Route, Switch } from 'react-router-dom'\n\nimport { IsAuthenticated,isAuthenticated } from './api/api'\nimport { LoginPage } from './component/page/login/LoginPage'\nimport { MainPage } from './component/page/main/MainPage'\nimport { isNotStartedOrPending, isRejected, usePromise } from './utils/use-promise'\n\nexport const App = (): React.ReactElement => {\n\tconst isAuthenticatedPromise = usePromise<AxiosResponse<IsAuthenticated>>(isAuthenticated)\n\n\tif (isNotStartedOrPending(isAuthenticatedPromise)) {\n\t\treturn <div>...</div>\n\t}\n\n\tif (isRejected(isAuthenticatedPromise) || !isAuthenticatedPromise?.result.data.isAuthenticated) {\n\t\treturn <LoginPage />\n\t}\n\n\treturn (\n\t\t<BrowserRouter>\n\t\t\t<Switch>\n\t\t\t\t<Route path=\"/\">\n\t\t\t\t\t<MainPage/>\n\t\t\t\t</Route>\n\t\t\t</Switch>\n\t\t</BrowserRouter>\n\t)\n}\n","class Environment {\n\tget isProduction() {\n\t\treturn !this.isDevelopment\n\t}\n\n\tget isDevelopment() {\n\t\treturn process.env.REACT_APP_DEV === 'true'\n\t}\n}\n\nconst env = new Environment()\n\nexport default env\n","import './index.less'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { App } from './App'\nimport env from './utils/environment'\n\nif (env.isDevelopment) {\n\trequire('./mock')\n}\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"clearfix\":\"globals_clearfix__1wvoV\",\"center-block\":\"globals_center-block__1o6dP\",\"pull-right\":\"globals_pull-right__3ZnXO\",\"pull-left\":\"globals_pull-left__eLe-J\",\"hide\":\"globals_hide__2SJQg\",\"show\":\"globals_show__LxKFH\",\"hidden\":\"globals_hidden__3_pLj\",\"invisible\":\"globals_invisible__LG5Br\",\"text-hide\":\"globals_text-hide__fcHSC\",\"ustilet\":\"globals_ustilet__1niq_\",\"blokk\":\"globals_blokk__2SATu\",\"blokk-null\":\"globals_blokk-null__3BExu\",\"blokk-xxxs\":\"globals_blokk-xxxs__2uEiL\",\"blokk-xxs\":\"globals_blokk-xxs__1QvnN\",\"blokk-xs\":\"globals_blokk-xs__1pRki\",\"blokk-s\":\"globals_blokk-s__1m3wX\",\"blokk-m\":\"globals_blokk-m__2j4AF\",\"blokk-l\":\"globals_blokk-l__eGvuf\",\"blokk-xl\":\"globals_blokk-xl__2ELo4\",\"blokkNull\":\"globals_blokkNull__a4Ulu\",\"blokkXxxs\":\"globals_blokkXxxs__2Cvqj\",\"blokkXxs\":\"globals_blokkXxs__2iyjl\",\"blokkXs\":\"globals_blokkXs__2ng7g\",\"blokkS\":\"globals_blokkS__1XQcJ\",\"blokkM\":\"globals_blokkM__2eVId\",\"blokkL\":\"globals_blokkL__35v0n\",\"blokkXl\":\"globals_blokkXl__iFU80\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginPage\":\"LoginPage_loginPage__3x1Ss\",\"title\":\"LoginPage_title__PRDDa\"};"],"sourceRoot":""}